{
    "value":  "{% extends \"pages/casino/base.html\" %}\n\n{% block title %}\nBlackjack (individual)\n{% endblock %}\n\n{% block content %}\n\u003cstyle\u003e\n:root{\r\n  --casino-green:#0b3d2e;\r\n  --casino-green-dark:#082b20;\r\n  --casino-gold:#d4af37;\r\n  --casino-gold-soft:#b8942c;\r\n  --neon-cyan:#00f3ff;\r\n  --neon-green:#2ecc71;\r\n  --neon-red:#ff5a5a;\r\n  --neon-pink:#ff5af1;\r\n  --neon-purple:#9b59b6;\r\n  --gradient-cyber: linear-gradient(135deg,#00f3ff,#ff5af1);\r\n  --border-radius-cyber: 12px;\r\n}\r\n*{box-sizing:border-box}\r\nbody{background:#12191b;color:#e7e7e7;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,\"Helvetica Neue\",Arial}\r\n.container{max-width:1100px;margin:30px auto;padding:0 16px}\r\n.card{background:linear-gradient(180deg,#0f1417 0%, #0b1113 100%);border:1px solid rgba(212,175,55,.18);box-shadow:0 0 0 1px rgba(212,175,55,.15), 0 8px 30px rgba(0,0,0,.4);border-radius:14px}\r\n.card .card-body{padding:16px}\r\n.text-cyan{color:var(--casino-gold)!important}\r\n.border-cyan{border-color:var(--casino-gold)!important}\r\n.text-gradient{background:linear-gradient(90deg,var(--casino-gold),#fff);-webkit-background-clip:text;background-clip:text;color:transparent}\r\n\r\n/* Topbar */\n.topbar{\n  display:flex;\n  align-items:center;\n  gap:12px;\n  flex-wrap:wrap;\n  padding:10px 14px 6px;\n  border-bottom:1px dashed rgba(212,175,55,.25);\n  position:sticky;top:0;\n  background:rgba(18,25,27,.8);\n  backdrop-filter:blur(4px);\n  z-index:10\n}\n.topbar-left,.topbar-center,.topbar-right{display:flex;align-items:center;gap:10px}\n.topbar-left{flex:1;min-width:220px;flex-wrap:wrap}\n.topbar-left small, .topbar-right small{opacity:.85;color:#c7c7c7}\n.topbar-left .money{font-weight:800;font-size:0.95rem}\n.topbar-center{flex:1;justify-content:center;text-align:center;min-width:200px}\n.topbar-center .estado{font-weight:900;letter-spacing:1px;font-size:1.05rem;color:#ff8c1a}\n.topbar-right{flex:1;justify-content:flex-end;flex-wrap:wrap;min-width:260px}\n\n.help-pill{cursor:pointer;border:1px solid var(--casino-gold);color:var(--casino-gold);padding:4px 10px;border-radius:999px;font-weight:700;transition:all .15s}\n.help-pill:hover{background:rgba(212,175,55,.08)}\n\r\n/* Modal simple */\r\n.help-modal{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;z-index:9999}\r\n.help-modal .panel{width:min(900px,92vw);max-height:85vh;overflow:auto;background:#0f1417;border:1px solid rgba(212,175,55,.35);border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.6)}\r\n.help-modal .panel header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid rgba(212,175,55,.2)}\r\n.help-modal .panel header h5{margin:0;color:var(--casino-gold)}\r\n.help-modal .panel .content{padding:16px 18px;color:#e7e7e7;line-height:1.5}\r\n.help-close{cursor:pointer;font-weight:800;opacity:.85}\r\n\r\n/* Inputs y botones */\r\n.input-group{display:flex;align-items:stretch}\n.input-group-text{display:flex;align-items:center;justify-content:center;padding:0 14px;border:1px solid var(--casino-gold);border-right:none;background:#0b1113;color:var(--casino-gold);font-weight:800;border-radius:10px 0 0 10px}\n.form-control{flex:1;min-width:140px;padding:12px;border:1px solid var(--casino-gold);border-left:none;color:#fff;background:#0b1113;border-radius:0 10px 10px 0;outline:none;font-weight:700}\n.apuesta-chips{display:flex;gap:8px;flex-wrap:wrap;align-items:stretch;margin-top:8px}\n.bet-chip{border:1px solid var(--casino-gold);color:var(--casino-gold);background:rgba(212,175,55,.08);border-radius:10px;padding:10px 14px;font-weight:800;cursor:pointer;min-width:56px;text-align:center;transition:all .15s;box-shadow:0 0 0 1px rgba(212,175,55,.12)}\n.bet-chip:hover{background:rgba(212,175,55,.14);box-shadow:0 0 10px rgba(212,175,55,.35)}\n.form-label{display:block;margin-bottom:6px}\r\n.btn{display:inline-block;cursor:pointer;border:1px solid transparent;background:#3498db;color:#fff;border-radius:10px;padding:10px 14px;font-weight:800}\r\n.btn:disabled{opacity:.55;pointer-events:none}\r\n.btn-success{background:var(--casino-gold);border-color:var(--casino-gold-soft);color:#111}\r\n.btn-success:hover{filter:brightness(1.1);box-shadow:0 0 10px rgba(212,175,55,.6)}\r\n\r\n.btn-outline-cyan{\r\n  border:1px solid var(--casino-gold);color:var(--casino-gold);background:transparent;width:32px;height:32px;border-radius:50%;\r\n  display:inline-flex;align-items:center;justify-content:center;margin-left:10px;font-weight:700\r\n}\r\n.btn-outline-cyan:hover{background:rgba(212,175,55,.15)}\r\n\r\n.btn-action-green{background:#2ecc71;border-color:#27ae60;color:#0b1113}\r\n.btn-action-red{background:#e74c3c;border-color:#c0392b;color:#0b1113}\r\n.btn-global{background:#3498db;border-color:#2980b9;color:#fff}\r\n.btn-global.exit{background:#111;border-color:#fff}\r\n.btn.small{padding:8px 10px;font-size:.9rem}\r\n\r\n/* Mesa */\r\n.holo-table {\r\n  background: linear-gradient(135deg, rgba(0, 243, 255, 0.05), rgba(255, 0, 255, 0.05));\r\n  border: 2px solid var(--neon-cyan);\r\n  border-radius: var(--border-radius-cyber);\r\n  padding: 40px 20px 130px; /* extra bottom padding so controls never overlap cards */\r\n  position: relative; overflow:hidden;\r\n}\r\n.holo-table::before {\r\n  content:\u0027\u0027;position:absolute;inset:0;background:\r\n  linear-gradient(90deg, transparent 95%, rgba(0, 243, 255, 0.1) 100%),\r\n  linear-gradient(0deg, transparent 95%, rgba(0, 243, 255, 0.1) 100%);\r\n  background-size:50px 50px;pointer-events:none;\r\n}\r\n.player-section{margin:30px 0}\r\n.player-header{display:flex;justify-content:center;align-items:center;gap:12px;margin-bottom:12px}\r\n.player-header h4{font-size:1rem;letter-spacing:.5px;text-transform:uppercase;color:#e0e0e0}\r\n.puntos-display{font-family:\u0027Orbitron\u0027,monospace;font-size:.9rem;font-weight:700;padding:6px 10px;border:1px solid var(--casino-gold);color:var(--casino-gold);background:rgba(212,175,55,.08);border-radius:8px}\r\n\r\n.cartas-container-holo{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;min-height:170px;align-items:center}\r\n.carta-holo{width:120px;height:170px;position:relative;transition:all .3s ease;perspective:1000px}\r\n.carta-contenido{width:100%;height:100%;background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:12px;display:flex;flex-direction:column;justify-content:space-between;padding:15px;position:relative;z-index:2;box-shadow:0 0 20px rgba(0,243,255,.3);border:2px solid var(--neon-cyan)}\r\n.carta-borde-holo{position:absolute;inset:-4px;border:2px solid var(--neon-cyan);border-radius:16px;transition:all .3s ease;z-index:1}\r\n.carta-pattern{position:absolute;inset:0;background:\r\n  radial-gradient(circle at 30% 30%, rgba(0,243,255,.1) 0%, transparent 50%),\r\n  radial-gradient(circle at 70% 70%, rgba(255,0,255,.1) 0%, transparent 50%);border-radius:12px;z-index:1}\r\n.carta-valor{font-size:1.4em;font-weight:800;font-family:\u0027Orbitron\u0027,monospace;color:var(--neon-cyan);text-shadow:0 0 10px currentColor}\r\n.carta-palo{font-size:2.5em;text-align:center;text-shadow:0 0 15px currentColor}\r\n.carta-corner{position:absolute;bottom:10px;right:10px;font-size:1em;font-weight:700;color:var(--neon-cyan)}\r\n.carta-oculta .carta-contenido{background:linear-gradient(135deg,#2a1a2e,#26213e);border-color:var(--neon-purple)}\r\n.carta-secreta{display:flex;align-items:center;justify-content:center;height:100%;font-size:2em;color:var(--neon-purple)}\r\n.carta-holo:hover{transform:translateY(-10px) scale(1.05)}\r\n.carta-holo:hover .carta-borde-holo{border-color:var(--neon-pink);box-shadow:0 0 30px var(--neon-pink)}\r\n\r\n/* Controles (BAJADOS) */\r\n#controles-juego{\r\n  position:absolute;\r\n  right:36px;\r\n  bottom:20px;     /* lowered from 66px to 20px */\r\n  z-index:2000;\r\n  display:flex;gap:10px;flex-wrap:wrap\r\n}\r\n#acciones-globales{position:fixed;right:24px;bottom:24px;z-index:1300;display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;max-width:calc(100vw - 48px)}\r\n.cyber-alert{background:rgba(0,0,0,.9);border:2px solid;border-radius:var(--border-radius-cyber);backdrop-filter:blur(10px);padding:2rem}\r\n\r\n/* Estad√≠sticas */\r\n.stats-panel {\r\n  background: rgba(11, 17, 19, 0.8);\r\n  border: 1px solid rgba(212,175,55,.2);\r\n  border-radius: 10px;\r\n  padding: 12px;\r\n  margin-top: 16px;\r\n}\r\n.stats-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  gap: 10px;\r\n}\r\n.stat-item {\r\n  text-align: center;\r\n  padding: 8px;\r\n  background: rgba(212,175,55,.05);\r\n  border-radius: 6px;\r\n}\r\n.stat-value {\r\n  font-family: \u0027Orbitron\u0027, monospace;\r\n  font-weight: 700;\r\n  color: var(--casino-gold);\r\n  font-size: 1.1rem;\r\n}\r\n.stat-label {\r\n  font-size: 0.8rem;\r\n  opacity: 0.8;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width:768px){\n  .carta-holo{width:88px;height:128px}\n  #controles-juego{position:static;justify-content:center;margin-top:10px}\n  .stats-grid { grid-template-columns: repeat(2, 1fr); }\n  .topbar{flex-direction:column;align-items:flex-start}\n  .topbar-right{width:100%;justify-content:flex-start}\n  .topbar-center{width:100%;order:3;justify-content:center}\n}\n\u003c/style\u003e\n\n\u003cdiv class=\"container\"\u003e\r\n    \u003cdiv class=\"card\"\u003e\r\n      \u003cdiv class=\"card-body\"\u003e\r\n        \u003c!-- TOPBAR --\u003e\n        \u003cdiv class=\"topbar\"\u003e\n          \u003cdiv class=\"topbar-left\"\u003e\n            \u003cdiv style=\"display:flex;flex-direction:column;gap:2px;min-width:140px\"\u003e\n              \u003csmall\u003eSALDO\u003c/small\u003e\n              \u003cdiv class=\"money\"\u003e\u0026euro;\u003cspan id=\"balance\"\u003e0.00\u003c/span\u003e\u003c/div\u003e\n            \u003c/div\u003e\n            \u003cdiv style=\"display:flex;flex-direction:column;gap:2px;min-width:140px\"\u003e\n              \u003csmall\u003e\u0026Uacute;LTIMO RESULTADO\u003c/small\u003e\n              \u003cdiv class=\"last\" id=\"ultimo-resultado\"\u003e\u0026euro;0.00\u003c/div\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n          \u003cdiv class=\"topbar-center\"\u003e\n            \u003cdiv class=\"estado\" id=\"estado-sistema\"\u003eEN ESPERA\u003c/div\u003e\n          \u003c/div\u003e\n          \u003cdiv class=\"topbar-right\"\u003e\n            \u003ca href=\"{{ url_for(\u0027dashboard.home\u0027) }}\" class=\"help-pill\" style=\"background:#00c3ff; color:#000; font-weight:700; white-space: nowrap;\"\u003e\n              \u003ci class=\"fas fa-home me-1\"\u003e\u003c/i\u003e MEN\u0026Uacute; PRINCIPAL\n            \u003c/a\u003e\n            \u003ca class=\"btn\" style=\"border:1px solid #d4af37;padding:8px 12px;border-radius:8px;color:#d4af37;text-decoration:none\"\n               href=\"/salas-espera?juego=blackjack\"\u003e\n              Modo Multijugador (crear/unirse a sala)\n            \u003c/a\u003e\n            \u003cdiv class=\"help-pill\" id=\"open-help\" style=\"white-space: nowrap;\"\u003e\n              AYUDA\n            \u003c/div\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n\n        \u003c!-- MODAL AYUDA --\u003e\r\n        \u003cdiv class=\"help-modal\" id=\"help-modal\"\u003e\r\n          \u003cdiv class=\"panel\"\u003e\r\n            \u003cheader\u003e\u003ch5\u003eC√≥mo se juega al Blackjack\u003c/h5\u003e\u003cdiv class=\"help-close\" id=\"close-help\"\u003e‚úï\u003c/div\u003e\u003c/header\u003e\r\n            \u003cdiv class=\"content\"\u003e\r\n              \u003cp\u003e\u003cstrong\u003eOBJETIVO DEL BLACKJACK\u003c/strong\u003e\u003c/p\u003e\r\n\u003cp\u003eEl objetivo principal es conseguir una mano cuyo valor sea m√°s cercano a 21 que la mano del crupier, sin pasarse de este n√∫mero. Cada jugador compite √∫nicamente contra el crupier, no contra otros jugadores.\u003c/p\u003e\r\n\r\n\u003cp\u003e\u003cstrong\u003eVALORES DE LAS CARTAS\u003c/strong\u003e\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003e\u003cstrong\u003eCartas num√©ricas (2-10):\u003c/strong\u003e Valen su valor facial\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eFiguras (J, Q, K):\u003c/strong\u003e Valen 10 puntos cada una\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eAs (A):\u003c/strong\u003e Vale 11 puntos, pero si con 11 te pasas de 21, autom√°ticamente vale 1 punto\u003c/li\u003e\r\n\u003c/ul\u003e\r\n\r\n\u003cp\u003e\u003cstrong\u003eDESARROLLO DEL JUEGO\u003c/strong\u003e\u003c/p\u003e\r\n\u003col\u003e\r\n\u003cli\u003e\u003cstrong\u003eApuesta inicial:\u003c/strong\u003e Coloca tu apuesta antes de repartir las cartas\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eReparto inicial:\u003c/strong\u003e Recibes 2 cartas boca arriba, el crupier recibe una carta boca arriba y una boca abajo\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eTurno del jugador:\u003c/strong\u003e Decides c√≥mo jugar tu mano con las siguientes opciones:\u003c/li\u003e\r\n\u003c/ol\u003e\r\n\r\n\u003cp\u003e\u003cstrong\u003eOPCIONES DISPONIBLES\u003c/strong\u003e\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003e\u003cstrong\u003ePEDIR (HIT):\u003c/strong\u003e Recibir una carta adicional. Puedes pedir tantas cartas como quieras hasta que te plantes o te pases de 21.\u003c/li\u003e\r\n\r\n\u003cli\u003e\u003cstrong\u003ePLANTARSE (STAND):\u003c/strong\u003e Mantener tu mano actual y pasar el turno al crupier.\u003c/li\u003e\r\n\r\n\u003cli\u003e\u003cstrong\u003eDOBLAR (DOUBLE):\u003c/strong\u003e Duplicar tu apuesta inicial y recibir exactamente UNA carta m√°s. Solo disponible en las dos primeras cartas.\u003c/li\u003e\r\n\r\n\u003cli\u003e\u003cstrong\u003eSEPARAR (SPLIT):\u003c/strong\u003e Si tus dos primeras cartas son del mismo valor, puedes dividirlas en dos manos separadas, cada una con su propia apuesta igual a la inicial. Recibir√°s una carta adicional para cada nueva mano.\u003c/li\u003e\r\n\r\n\u003cli\u003e\u003cstrong\u003eSEGURO (INSURANCE):\u003c/strong\u003e Cuando el crupier muestra un As, puedes apostar la mitad de tu apuesta inicial a que el crupier tiene blackjack. Si aciertas, recibes 2:1 en el seguro, pero pierdes la apuesta principal.\u003c/li\u003e\r\n\u003c/ul\u003e\r\n\r\n\u003cp\u003e\u003cstrong\u003eBLACKJACK NATURAL\u003c/strong\u003e\u003c/p\u003e\r\n\u003cp\u003eUn \"blackjack\" es cuando obtienes un As y una carta de valor 10 (10, J, Q, K) en las dos primeras cartas. El blackjack paga 3:2 (apuestas 10‚Ç¨, ganas 15‚Ç¨ adicionales). Si tanto t√∫ como el crupier tienen blackjack, es empate (push).\u003c/p\u003e\r\n\r\n\u003cp\u003e\u003cstrong\u003eREGLAS DEL CRUPIER\u003c/strong\u003e\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003eEl crupier debe pedir cartas hasta alcanzar 17 puntos o m√°s\u003c/li\u003e\r\n\u003cli\u003eSi el crupier tiene 17 suave (A+6), debe plantarse\u003c/li\u003e\r\n\u003cli\u003eEl crupier juega despu√©s de que todos los jugadores hayan completado sus turnos\u003c/li\u003e\r\n\u003c/ul\u003e\r\n\r\n\u003cp\u003e\u003cstrong\u003ePAGOS Y RESULTADOS\u003c/strong\u003e\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003e\u003cstrong\u003eVictoria normal:\u003c/strong\u003e 1:1 (apuestas 10‚Ç¨, ganas 10‚Ç¨ adicionales)\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eBlackjack:\u003c/strong\u003e 3:2 (apuestas 10‚Ç¨, ganas 15‚Ç¨ adicionales)\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eEmpate (Push):\u003c/strong\u003e Recuperas tu apuesta original\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eDerrota:\u003c/strong\u003e Pierdes tu apuesta\u003c/li\u003e\r\n\u003cli\u003e\u003cstrong\u003eSeguro:\u003c/strong\u003e 2:1 (si el crupier tiene blackjack)\u003c/li\u003e\r\n\u003c/ul\u003e\r\n\r\n\u003cp\u003e\u003cstrong\u003eESTRATEGIAS B√ÅSICAS\u003c/strong\u003e\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003eSi tienes 11 o menos, siempre pide carta\u003c/li\u003e\r\n\u003cli\u003eSi tienes 17 o m√°s, normalmente debes plantearte\u003c/li\u003e\r\n\u003cli\u003eDobla cuando tengas 11 puntos contra cualquier carta del crupier (excepto si muestra un As)\u003c/li\u003e\r\n\u003cli\u003eSepara Ases y ochos siempre, nunca separes decenas ni cincos\u003c/li\u003e\r\n\u003cli\u003eEl seguro generalmente no es favorable matem√°ticamente\u003c/li\u003e\r\n\u003c/ul\u003e\r\n\r\n\u003cp\u003e\u003cstrong\u003eESTAD√çSTICAS DE SESI√ìN\u003c/strong\u003e\u003c/p\u003e\r\n\u003cp\u003ePuedes seguir tu rendimiento en el panel de estad√≠sticas, que incluye partidas jugadas, victorias, derrotas, empates, blackjacks conseguidos y tu saldo actual. Estas estad√≠sticas se mantienen durante toda tu sesi√≥n de juego.\u003c/p\u003e\r\n\r\n\u003cp\u003e¬°Disfruta del juego y recuerda jugar responsablemente!\u003c/p\u003e\r\n            \u003c/div\u003e\r\n          \u003c/div\u003e\r\n        \u003c/div\u003e\r\n\r\n        \u003c!-- APUESTA --\u003e\r\n        \u003cdiv id=\"controles-apuesta\" class=\"mb-4\" style=\"margin-top:16px;\"\u003e\r\n          \u003cdiv class=\"row\" style=\"display:flex;gap:16px;flex-wrap:wrap\"\u003e\r\n            \u003cdiv class=\"col\" style=\"flex:1;min-width:260px\"\u003e\r\n              \u003clabel for=\"cantidad\" class=\"form-label\"\u003eAPUESTA\u003c/label\u003e\r\n              \u003cdiv class=\"input-group\"\u003e\r\n                \u003cspan class=\"input-group-text\"\u003e‚Ç¨\u003c/span\u003e\r\n                \u003cinput type=\"number\" class=\"form-control\" id=\"cantidad\" min=\"1\" step=\"1\" value=\"10\"\u003e\r\n                \u003cbutton class=\"btn btn-outline-cyan\" onclick=\"apuestaRapida(25)\"\u003e25\u003c/button\u003e\r\n                \u003cbutton class=\"btn btn-outline-cyan\" onclick=\"apuestaRapida(50)\"\u003e50\u003c/button\u003e\r\n                \u003cbutton class=\"btn btn-outline-cyan\" onclick=\"apuestaRapida(100)\"\u003e100\u003c/button\u003e\r\n              \u003c/div\u003e\r\n            \u003c/div\u003e\r\n            \u003cdiv class=\"col\" style=\"flex:1;min-width:260px;display:flex;align-items:end\"\u003e\r\n              \u003cbutton class=\"btn btn-success w-100\" style=\"width:100%\" onclick=\"iniciarBlackjack()\" id=\"btn-iniciar\"\u003eINICIAR SIMULACI√ìN\u003c/button\u003e\r\n            \u003c/div\u003e\r\n          \u003c/div\u003e\r\n        \u003c/div\u003e\r\n\r\n        \u003c!-- MESA --\u003e\r\n        \u003cdiv id=\"mesa-juego\" style=\"display:none\"\u003e\r\n          \u003cdiv class=\"holo-table\"\u003e\r\n            \u003cdiv class=\"player-section casa-section\"\u003e\r\n              \u003cdiv class=\"player-header\"\u003e\r\n                \u003ch4 class=\"text-gradient\"\u003eCRUPIER\u003c/h4\u003e\r\n                \u003cdiv class=\"puntos-display\" id=\"puntos-casa\"\u003ePUNTOS: 0\u003c/div\u003e\r\n              \u003c/div\u003e\r\n              \u003cdiv id=\"mano-casa\" class=\"cartas-container-holo\"\u003e\u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            \u003cdiv class=\"player-section jugador-section\"\u003e\r\n              \u003cdiv class=\"player-header\"\u003e\r\n                \u003ch4 class=\"text-gradient\"\u003eTU MANO\u003c/h4\u003e\r\n                \u003cdiv class=\"puntos-display\" id=\"puntos-jugador\"\u003ePUNTOS: 0\u003c/div\u003e\r\n              \u003c/div\u003e\r\n              \u003cdiv id=\"manos-jugador\" class=\"cartas-container-holo\"\u003e\u003c/div\u003e\r\n              \u003cdiv id=\"indicador-mano\" class=\"text-center text-gradient mt-2\" style=\"font-weight:800;text-align:center;margin-top:8px\"\u003e\u003c/div\u003e\r\n            \u003c/div\u003e\r\n\r\n            \u003c!-- Controles de juego --\u003e\r\n            \u003cdiv id=\"controles-juego\"\u003e\r\n              \u003cbutton class=\"btn btn-action-green\" id=\"btn-pedir\"\u003ePEDIR\u003c/button\u003e\r\n              \u003cbutton class=\"btn btn-action-red\" id=\"btn-plantar\"\u003ePLANTARSE\u003c/button\u003e\r\n              \u003cbutton class=\"btn btn small\" id=\"btn-doblar\"\u003eDOBLAR\u003c/button\u003e\r\n              \u003cbutton class=\"btn btn small\" id=\"btn-split\"\u003eSEPARAR\u003c/button\u003e\r\n              \u003cbutton class=\"btn btn small\" id=\"btn-insurance\" style=\"display:none;\"\u003eSEGURO\u003c/button\u003e\r\n            \u003c/div\u003e\r\n          \u003c/div\u003e\r\n        \u003c/div\u003e\r\n\r\n        \u003c!-- Panel de Estad√≠sticas --\u003e\r\n        \u003cdiv class=\"stats-panel\" id=\"stats-panel\"\u003e\r\n          \u003ch5 style=\"text-align:center;margin-bottom:12px;color:var(--casino-gold)\"\u003eESTAD√çSTICAS DE SESI√ìN\u003c/h5\u003e\r\n          \u003cdiv class=\"stats-grid\"\u003e\r\n            \u003cdiv class=\"stat-item\"\u003e\r\n              \u003cdiv class=\"stat-label\"\u003ePARTIDAS JUGADAS\u003c/div\u003e\r\n              \u003cdiv class=\"stat-value\" id=\"stat-partidas\"\u003e0\u003c/div\u003e\r\n            \u003c/div\u003e\r\n            \u003cdiv class=\"stat-item\"\u003e\r\n              \u003cdiv class=\"stat-label\"\u003eVICTORIAS\u003c/div\u003e\r\n              \u003cdiv class=\"stat-value\" id=\"stat-victorias\"\u003e0\u003c/div\u003e\r\n            \u003c/div\u003e\r\n            \u003cdiv class=\"stat-item\"\u003e\r\n              \u003cdiv class=\"stat-label\"\u003eDERROTAS\u003c/div\u003e\r\n              \u003cdiv class=\"stat-value\" id=\"stat-derrotas\"\u003e0\u003c/div\u003e\r\n            \u003c/div\u003e\r\n            \u003cdiv class=\"stat-item\"\u003e\r\n              \u003cdiv class=\"stat-label\"\u003eEMPATES\u003c/div\u003e\r\n              \u003cdiv class=\"stat-value\" id=\"stat-empates\"\u003e0\u003c/div\u003e\r\n            \u003c/div\u003e\r\n            \u003cdiv class=\"stat-item\"\u003e\r\n              \u003cdiv class=\"stat-label\"\u003eBLACKJACKS\u003c/div\u003e\r\n              \u003cdiv class=\"stat-value\" id=\"stat-blackjacks\"\u003e0\u003c/div\u003e\r\n            \u003c/div\u003e\r\n            \u003cdiv class=\"stat-item\"\u003e\r\n              \u003cdiv class=\"stat-label\"\u003eSALDO ACTUAL\u003c/div\u003e\r\n              \u003cdiv class=\"stat-value\"\u003e\u0026euro;\u003cspan id=\"stat-saldo\"\u003e500.00\u003c/span\u003e\u003c/div\u003e\r\n            \u003c/div\u003e\r\n          \u003c/div\u003e\r\n        \u003c/div\u003e\r\n\r\n        \u003cdiv id=\"resultado\" class=\"mt-4\" style=\"margin-top:16px\"\u003e\u003c/div\u003e\r\n      \u003c/div\u003e\r\n    \u003c/div\u003e\r\n  \u003c/div\u003e\r\n\r\n  \u003c!-- Acciones globales --\u003e\r\n  \u003cdiv id=\"acciones-globales\"\u003e\r\n    \u003cbutton class=\"btn btn-global small\" id=\"btn-reiniciar-misma\" onclick=\"reiniciarMismaApuesta()\" disabled\u003eREINICIAR (MISMA APUESTA)\u003c/button\u003e\r\n    \u003cbutton class=\"btn btn-global exit small\" onclick=\"salirDelJuego()\"\u003eSALIR\u003c/button\u003e\r\n  \u003c/div\u003e\n{% endblock %}\n\n{% block scripts %}\n\u003cscript\u003e\n// ================== CONFIG ==================\r\nconst DEALER_STAND_SOFT_17 = true;   // crupier se planta en 17 suave\r\nconst ENABLE_SPLIT = true;           // permitir 1 separaci√≥n\r\nconst DECKS = 6;                     // mazos\r\n// ================== ESTADO ==================\r\nlet balance = 0; // se cargar√° desde el backend\r\n// Cargar saldo real del usuario\r\nfetch(\u0027/api/balance\u0027)\r\n  .then(r =\u003e r.json())\r\n  .then(d =\u003e {\r\n    if (typeof d.balance === \u0027number\u0027) {\r\n      balance = d.balance;\r\n      const $bal = document.getElementById(\u0027balance\u0027);\r\n      if ($bal) $bal.textContent = balance.toFixed(2);\r\n      const $stat = document.getElementById(\u0027stat-saldo\u0027);\r\n      if ($stat) $stat.textContent = balance.toFixed(2);\r\n    }\r\n  })\r\n  .catch(()=\u003e{ /* opcional: silenciar error si no hay sesi√≥n */ });\r\n\r\nlet juegoActivo = false;\r\nlet deck = [];\r\nlet apuestaBase = 0;\r\nlet seguroTomado = false;\r\nlet costoSeguro = 0;\r\n\r\nlet manosJugador = []; // [{cartas:[], apuesta, doblada:false, terminada:false, sePuedeDoblar:true}]\r\nlet manoDealer = [];\r\nlet indiceManoActual = 0;\r\n\r\n// ================== ESTAD√çSTICAS ==================\r\nlet estadisticas = {\r\n  partidasJugadas: 0,\r\n  victorias: 0,\r\n  derrotas: 0,\r\n  empates: 0,\r\n  blackjacks: 0,\r\n  rachaActual: 0,\r\n  mejorRacha: 0\r\n};\r\n\r\n// ================== BARAJA ==================\r\nconst valoresCartas = { \u00272\u0027:2,\u00273\u0027:3,\u00274\u0027:4,\u00275\u0027:5,\u00276\u0027:6,\u00277\u0027:7,\u00278\u0027:8,\u00279\u0027:9,\u002710\u0027:10,\u0027J\u0027:10,\u0027Q\u0027:10,\u0027K\u0027:10,\u0027A\u0027:11 };\r\nconst palos = [\u0027‚ô†\u0027,\u0027‚ô•\u0027,\u0027‚ô¶\u0027,\u0027‚ô£\u0027];\r\n\r\nfunction crearBaraja(n=1){\r\n  const d=[];\r\n  for(let k=0;k\u003cn;k++){\r\n    for(const p of palos){\r\n      for(const v of Object.keys(valoresCartas)){\r\n        d.push({valor:v,palo:p});\r\n      }\r\n    }\r\n  }\r\n  return d;\r\n}\r\nfunction barajar(a){\r\n  for(let i=a.length-1;i\u003e0;i--){\r\n    const j=Math.floor(Math.random()*(i+1));\r\n    [a[i],a[j]]=[a[j],a[i]];\r\n  }\r\n  return a;\r\n}\r\nfunction robar(){\r\n  if(deck.length===0){ deck = barajar(crearBaraja(DECKS)); }\r\n  return deck.pop();\r\n}\r\n\r\n// ================== UTIL ==================\r\nfunction valorMano(cartas){\r\n  let puntos=0, ases=0;\r\n  for(const c of cartas){ \r\n    puntos+=valoresCartas[c.valor]; \r\n    if(c.valor===\u0027A\u0027) ases++; \r\n  }\r\n  while(puntos\u003e21 \u0026\u0026 ases\u003e0){ puntos-=10; ases--; }\r\n  return {puntos, suave: ases\u003e0};\r\n}\r\n\r\nfunction valorManoCrupierVisibles(cartasCrupier) {\r\n  let puntos = 0, ases = 0;\r\n  for (let i = 0; i \u003c cartasCrupier.length; i++) {\r\n    // Solo contar cartas visibles (no ocultas)\r\n    if (cartasCrupier[i].oculta) continue;\r\n    \r\n    const valor = cartasCrupier[i].valor;\r\n    // CORRECCI√ìN: Usar valoresCartas para J, Q, K\r\n    puntos += valoresCartas[valor];\r\n    if (valor === \u0027A\u0027) ases += 1;\r\n  }\r\n  \r\n  // Ajustar valor del As si se pasa de 21\r\n  while (puntos \u003e 21 \u0026\u0026 ases \u003e 0) {\r\n    puntos -= 10;\r\n    ases -= 1;\r\n  }\r\n  \r\n  return puntos;\r\n}\r\n\r\nfunction esBlackjackInicial(cartas){ return cartas.length===2 \u0026\u0026 valorMano(cartas).puntos===21; }\r\nfunction mismoValor(c1,c2){ return valoresCartas[c1.valor]===valoresCartas[c2.valor]; }\r\nfunction limpiarNodo(id){ const el=document.getElementById(id); if(el) el.innerHTML=\u0027\u0027; }\r\n\r\n// ================== RENDER ==================\r\nfunction renderCarta(carta, oculta=false){\r\n  const card=document.createElement(\u0027div\u0027);\r\n  card.className=\u0027carta-holo\u0027;\r\n  if(oculta){\r\n    card.classList.add(\u0027carta-oculta\u0027);\r\n    card.innerHTML=`\r\n      \u003cdiv class=\"carta-pattern\"\u003e\u003c/div\u003e\r\n      \u003cdiv class=\"carta-contenido\"\u003e\u003cdiv class=\"carta-secreta\"\u003e?\u003c/div\u003e\u003c/div\u003e\r\n      \u003cdiv class=\"carta-borde-holo\"\u003e\u003c/div\u003e`;\r\n  }else{\r\n    const colorClass=(carta.palo===\u0027‚ô•\u0027||carta.palo===\u0027‚ô¶\u0027)?\u0027text-danger\u0027:\u0027text-cyan\u0027;\r\n    card.innerHTML=`\r\n      \u003cdiv class=\"carta-pattern\"\u003e\u003c/div\u003e\r\n      \u003cdiv class=\"carta-contenido\"\u003e\r\n        \u003cdiv class=\"carta-valor\"\u003e${carta.valor}\u003c/div\u003e\r\n        \u003cdiv class=\"carta-palo ${colorClass}\"\u003e${carta.palo}\u003c/div\u003e\r\n        \u003cdiv class=\"carta-corner\"\u003e${carta.valor}\u003c/div\u003e\r\n      \u003c/div\u003e\r\n      \u003cdiv class=\"carta-borde-holo\"\u003e\u003c/div\u003e`;\r\n  }\r\n  return card;\r\n}\r\nfunction renderizarManos(){\r\n  // Jugador\r\n  const cont=document.getElementById(\u0027manos-jugador\u0027);\r\n  limpiarNodo(\u0027manos-jugador\u0027);\r\n  manosJugador.forEach((m, idx)=\u003e{\r\n    const wrap=document.createElement(\u0027div\u0027);\r\n    wrap.style.display=\u0027flex\u0027;wrap.style.gap=\u002712px\u0027;wrap.style.alignItems=\u0027center\u0027;\r\n    wrap.style.border= idx===indiceManoActual ? \u00272px solid var(--neon-cyan)\u0027 : \u00272px solid transparent\u0027;\r\n    wrap.style.borderRadius=\u002712px\u0027;wrap.style.padding=\u00276px\u0027;\r\n    m.cartas.forEach(c=\u003ewrap.appendChild(renderCarta(c,false)));\r\n    if(m.doblada){\r\n      const tag=document.createElement(\u0027div\u0027);tag.className=\u0027puntos-display\u0027;tag.textContent=\u0027DOBLAR\u0027;wrap.appendChild(tag);\r\n    }\r\n    cont.appendChild(wrap);\r\n  });\r\n\r\n  // Dealer\r\n  const contD=document.getElementById(\u0027mano-casa\u0027);\r\n  limpiarNodo(\u0027mano-casa\u0027);\r\n  manoDealer.forEach(c=\u003econtD.appendChild(renderCarta(c, !!c.oculta)));\r\n}\r\n\r\nfunction actualizarMarcadores(){\r\n  const manoAct=manosJugador[indiceManoActual] || {cartas:[]};\r\n  const pj=valorMano(manoAct.cartas).puntos;\r\n  document.getElementById(\u0027puntos-jugador\u0027).textContent=`PUNTOS: ${pj}`;\r\n  document.getElementById(\u0027puntos-jugador\u0027).className = `puntos-display ${pj\u003e21?\u0027text-danger\u0027:\u0027text-success\u0027}`;\r\n\r\n  // CORRECCI√ìN: Usar solo cartas visibles del crupier\r\n  const pd=valorManoCrupierVisibles(manoDealer);\r\n  document.getElementById(\u0027puntos-casa\u0027).textContent=`PUNTOS: ${pd}`;\r\n  document.getElementById(\u0027puntos-casa\u0027).className = `puntos-display ${pd\u003e21?\u0027text-danger\u0027:\u0027text-success\u0027}`;\r\n\r\n  const indi=document.getElementById(\u0027indicador-mano\u0027);\r\n  if(manosJugador.length\u003e1){ indi.textContent=`Mano ${indiceManoActual+1} de ${manosJugador.length}`; }\r\n  else { indi.textContent=\u0027\u0027; }\r\n\r\n  document.getElementById(\u0027balance\u0027).textContent = balance.toFixed(2);\r\n  document.getElementById(\u0027stat-saldo\u0027).textContent = balance.toFixed(2);\r\n}\r\n\r\nfunction actualizarEstadisticas() {\r\n  document.getElementById(\u0027stat-partidas\u0027).textContent = estadisticas.partidasJugadas;\r\n  document.getElementById(\u0027stat-victorias\u0027).textContent = estadisticas.victorias;\r\n  document.getElementById(\u0027stat-derrotas\u0027).textContent = estadisticas.derrotas;\r\n  document.getElementById(\u0027stat-empates\u0027).textContent = estadisticas.empates;\r\n  document.getElementById(\u0027stat-blackjacks\u0027).textContent = estadisticas.blackjacks;\r\n  document.getElementById(\u0027stat-saldo\u0027).textContent = balance.toFixed(2);\r\n}\r\n\r\nfunction bloquearAcciones(bloq=true){\r\n  [\u0027btn-pedir\u0027,\u0027btn-plantar\u0027,\u0027btn-doblar\u0027,\u0027btn-split\u0027,\u0027btn-insurance\u0027]\r\n    .forEach(id=\u003e{ const b=document.getElementById(id); if(b) b.disabled=bloq; });\r\n}\r\n\r\nfunction debeOfrecerSeguro(){\r\n  return manoDealer.length\u003e=1 \u0026\u0026 manoDealer[0].valor===\u0027A\u0027\r\n      \u0026\u0026 juegoActivo \u0026\u0026 manosJugador.length===1 \u0026\u0026 manosJugador[0].cartas.length===2 \u0026\u0026 !seguroTomado;\r\n}\r\nfunction saldoSuficiente(c){ return c\u003e0 \u0026\u0026 c\u003c=balance; }\r\n\r\nfunction configurarBotonesAccion(){\r\n  const bHit=document.getElementById(\u0027btn-pedir\u0027);\r\n  const bStand=document.getElementById(\u0027btn-plantar\u0027);\r\n  const bDouble=document.getElementById(\u0027btn-doblar\u0027);\r\n  const bSplit=document.getElementById(\u0027btn-split\u0027);\r\n  const bIns=document.getElementById(\u0027btn-insurance\u0027);\r\n\r\n  if(bHit)   bHit.onclick = onHit;\r\n  if(bStand) bStand.onclick = onStand;\r\n  if(bDouble)bDouble.onclick = onDouble;\r\n  if(bSplit) bSplit.onclick = onSplit;\r\n  if(bIns)   bIns.onclick   = onInsurance;\r\n\r\n  const mano=manosJugador[indiceManoActual];\r\n  const puedeAccionar = !!(juegoActivo \u0026\u0026 mano \u0026\u0026 !mano.terminada);\r\n\r\n  if(bHit)   bHit.disabled   = !puedeAccionar;\r\n  if(bStand) bStand.disabled = !puedeAccionar;\r\n\r\n  if(bDouble){\r\n    bDouble.disabled = !(puedeAccionar \u0026\u0026 mano.cartas.length===2 \u0026\u0026 mano.sePuedeDoblar \u0026\u0026 saldoSuficiente(mano.apuesta));\r\n  }\r\n  if(bSplit){\r\n    bSplit.disabled = !(puedeAccionar \u0026\u0026 ENABLE_SPLIT \u0026\u0026 manosJugador.length===1 \u0026\u0026 mano.cartas.length===2 \u0026\u0026 mismoValor(mano.cartas[0], mano.cartas[1]) \u0026\u0026 saldoSuficiente(mano.apuesta));\r\n  }\r\n  if(bIns){\r\n    bIns.style.display = debeOfrecerSeguro()? \u0027inline-block\u0027:\u0027none\u0027;\r\n    bIns.disabled = bIns.style.display===\u0027none\u0027 || seguroTomado || !saldoSuficiente(apuestaBase/2) || !puedeAccionar;\r\n  }\r\n}\r\n\r\nfunction setEstado(texto, color){ const el=document.getElementById(\u0027estado-sistema\u0027); el.textContent=texto; if(color){el.style.color=color;} }\r\n\r\nfunction mostrarResultadoUI({tipo, delta, detalle}){\r\n  const clases = tipo===\u0027ganada\u0027||tipo===\u0027blackjack\u0027?\u0027alert-success\u0027:(tipo===\u0027empate\u0027?\u0027alert-warning\u0027:\u0027alert-danger\u0027);\r\n  const icono = tipo===\u0027ganada\u0027||tipo===\u0027blackjack\u0027?\u0027‚ö°\u0027:(tipo===\u0027empate\u0027?\u0027‚öñÔ∏è\u0027:\u0027üí•\u0027);\r\n  const titulo = tipo===\u0027blackjack\u0027?\u0027BLACKJACK LOGBAIT DETECTADO\u0027\r\n                : tipo===\u0027ganada\u0027 ? \u0027ALGORITMO OPTIMIZADO - VICTORIA\u0027\r\n                : tipo===\u0027empate\u0027 ? \u0027EMPATE NEURAL DETECTADO\u0027\r\n                : \u0027SISTEMA SOBRECARGADO - DERROTA\u0027;\r\n  \r\n  // QUITAR las estad√≠sticas antiguas y mostrar solo el resultado limpio\r\n  document.getElementById(\u0027resultado\u0027).innerHTML = `\r\n    \u003cdiv class=\"alert ${clases} cyber-alert text-center\"\u003e\r\n      \u003cdiv class=\"display-4 mb-3\"\u003e${icono}\u003c/div\u003e\r\n      \u003ch3 class=\"text-gradient\"\u003e${titulo}\u003c/h3\u003e\r\n      \u003cdiv class=\"mt-3\"\u003e\r\n        \u003cdiv class=\"text-small text-uppercase\"\u003eVARIACI√ìN DE SALDO\u003c/div\u003e\r\n        \u003cdiv class=\"h1 fw-bold ${delta\u003e=0?\u0027text-success\u0027:\u0027text-danger\u0027}\"\u003e‚Ç¨${delta.toFixed(2)}\u003c/div\u003e\r\n      \u003c/div\u003e\r\n    \u003c/div\u003e`;\r\n    \r\n  setEstado(\u0027AN√ÅLISIS COMPLETADO\u0027,\u0027#ff8c1a\u0027);\r\n  document.getElementById(\u0027btn-reiniciar-misma\u0027).disabled=false;\r\n  actualizarMarcadores();\r\n}\r\n\r\n// ================== FLUJO ==================\r\nfunction apuestaRapida(c){ document.getElementById(\u0027cantidad\u0027).value=c; }\r\n\r\nfunction iniciarBlackjack(){\r\n  const cantidad = parseFloat(document.getElementById(\u0027cantidad\u0027).value||\u00270\u0027);\r\n  if(!cantidad || cantidad\u003c=0) return alert(\u0027INGRESA UNA CANTIDAD V√ÅLIDA\u0027);\r\n  if(cantidad\u003ebalance) return alert(\u0027FONDOS INSUFICIENTES\u0027);\r\n\r\n  // Reset de ronda\r\n  document.getElementById(\u0027resultado\u0027).innerHTML=\u0027\u0027;\r\n  document.getElementById(\u0027btn-reiniciar-misma\u0027).disabled=true;\r\n  seguroTomado=false; costoSeguro=0;\r\n  indiceManoActual=0; manosJugador=[]; manoDealer=[];\r\n  apuestaBase=cantidad; juegoActivo=true; setEstado(\u0027SIMULACI√ìN ACTIVA\u0027,\u0027var(--neon-green)\u0027);\r\n\r\n  // Cobrar apuesta inicial (stake) del saldo\r\n  balance -= apuestaBase;\r\n\r\n  // Preparar UI\r\n  document.getElementById(\u0027controles-apuesta\u0027).style.display=\u0027none\u0027;\r\n  document.getElementById(\u0027mesa-juego\u0027).style.display=\u0027block\u0027;\r\n\r\n  if(deck.length\u003c52) deck = barajar(crearBaraja(DECKS));\r\n\r\n  // Reparto inicial\r\n  limpiarNodo(\u0027manos-jugador\u0027); limpiarNodo(\u0027mano-casa\u0027);\r\n  manosJugador.push({cartas:[],apuesta:apuestaBase,doblada:false,terminada:false,sePuedeDoblar:true});\r\n  const c1=robar(); manosJugador[0].cartas.push(c1);\r\n  const d1=robar(); manoDealer.push(d1);\r\n  const c2=robar(); manosJugador[0].cartas.push(c2);\r\n  const d2=robar(); manoDealer.push({...d2, oculta:true});\r\n\r\n  renderizarManos(); actualizarMarcadores();\r\n  configurarBotonesAccion();\r\n\r\n  // CORRECCI√ìN: No resolver blackjack inmediatamente, dejar que el jugador juegue\r\n  const jugadorBJ = esBlackjackInicial(manosJugador[0].cartas);\r\n  const dealerBJ  = esBlackjackInicial([manoDealer[0], {...manoDealer[1], oculta:false}]);\r\n\r\n  // Solo ofrecer seguro si el crupier muestra As, pero no resolver inmediatamente\r\n  if (dealerBJ \u0026\u0026 jugadorBJ) {\r\n    // Ambos tienen blackjack - esperar a que el jugador termine su turno\r\n    // El jugador puede plantarse inmediatamente si quiere\r\n  } else if (dealerBJ) {\r\n    // Solo el crupier tiene blackjack - el jugador puede seguir jugando normalmente\r\n    // Se resolver√° al final cuando el jugador se plante\r\n  } else if (jugadorBJ) {\r\n    // Solo el jugador tiene blackjack - puede seguir jugando si quiere (aunque no es recomendable)\r\n  }\r\n  \r\n  configurarBotonesAccion();\r\n}\r\n\r\nfunction onInsurance(){\r\n  if(!debeOfrecerSeguro()) return;\r\n  const coste=apuestaBase/2;\r\n  if(!saldoSuficiente(coste)) return alert(\u0027Saldo insuficiente para el seguro.\u0027);\r\n  seguroTomado=true; costoSeguro=coste;\r\n  balance -= coste; // se paga el seguro en el momento\r\n  configurarBotonesAccion();\r\n  actualizarMarcadores();\r\n  alert(\u0027Seguro activado (coste 1/2 de la apuesta, paga 2:1 si el crupier tiene blackjack).\u0027);\r\n}\r\n\r\nfunction onHit(){\r\n  const mano=manosJugador[indiceManoActual];\r\n  if(!juegoActivo || !mano || mano.terminada) return;\r\n  mano.sePuedeDoblar=false;\r\n  mano.cartas.push(robar());\r\n  renderizarManos(); actualizarMarcadores(); configurarBotonesAccion();\r\n  if(valorMano(mano.cartas).puntos\u003e21){ mano.terminada=true; avanzarOManoDealer(); }\r\n}\r\n\r\nfunction onStand(){\r\n  const mano=manosJugador[indiceManoActual];\r\n  if(!juegoActivo || !mano) return;\r\n  mano.terminada=true;\r\n  avanzarOManoDealer();\r\n}\r\n\r\nfunction onDouble(){\r\n  const mano=manosJugador[indiceManoActual];\r\n  if(!juegoActivo || !mano) return;\r\n  if(!(mano.cartas.length===2 \u0026\u0026 mano.sePuedeDoblar \u0026\u0026 saldoSuficiente(mano.apuesta))) return;\r\n  // Cobrar segunda apuesta (mismo importe que tiene la mano ahora)\r\n  balance -= mano.apuesta;\r\n  mano.apuesta *= 2;\r\n  mano.doblada=true; mano.sePuedeDoblar=false;\r\n  mano.cartas.push(robar());\r\n  renderizarManos(); actualizarMarcadores();\r\n  mano.terminada=true;\r\n  avanzarOManoDealer();\r\n}\r\n\r\nfunction onSplit(){\r\n  if(!juegoActivo || !ENABLE_SPLIT) return;\r\n  const m=manosJugador[0];\r\n  if(!(manosJugador.length===1 \u0026\u0026 m.cartas.length===2 \u0026\u0026 mismoValor(m.cartas[0],m.cartas[1]) \u0026\u0026 saldoSuficiente(m.apuesta))) return;\r\n\r\n  // Cobrar segunda apuesta (igual a la base)\r\n  balance -= m.apuesta;\r\n\r\n  const cA=m.cartas[0], cB=m.cartas[1];\r\n  manosJugador = [\r\n    {cartas:[cA, robar()], apuesta:apuestaBase, doblada:false, terminada:false, sePuedeDoblar:true},\r\n    {cartas:[cB, robar()], apuesta:apuestaBase, doblada:false, terminada:false, sePuedeDoblar:true},\r\n  ];\r\n  indiceManoActual=0;\r\n  renderizarManos(); actualizarMarcadores(); configurarBotonesAccion();\r\n}\r\n\r\nfunction avanzarOManoDealer(){\r\n  // Pasar a siguiente mano del jugador si existe\r\n  for(let i=0;i\u003cmanosJugador.length;i++){\r\n    if(!manosJugador[i].terminada){\r\n      indiceManoActual=i;\r\n      actualizarMarcadores(); configurarBotonesAccion();\r\n      return;\r\n    }\r\n  }\r\n  // Turno del dealer\r\n  turnoDealer();\r\n}\r\n\r\nfunction revelarCartaOculta(){\r\n  if(manoDealer[1] \u0026\u0026 manoDealer[1].oculta){\r\n    manoDealer[1] = {...manoDealer[1], oculta:false};\r\n    renderizarManos(); actualizarMarcadores();\r\n  }\r\n}\r\n\r\nfunction turnoDealer(){\r\n  revelarCartaOculta();\r\n  \r\n  // CORRECCI√ìN: Verificar si el crupier ya tiene blackjack\r\n  const dealerBJ = esBlackjackInicial(manoDealer);\r\n  if (dealerBJ) {\r\n    // Si el crupier tiene blackjack, resolver inmediatamente\r\n    setTimeout(resolverResultadoGlobal, 650);\r\n    return;\r\n  }\r\n  \r\n  const debeRobar = ()=\u003e{\r\n    const v=valorMano(manoDealer);\r\n    return v.puntos\u003c17 || (!DEALER_STAND_SOFT_17 \u0026\u0026 v.puntos===17 \u0026\u0026 v.suave);\r\n  };\r\n  const loop=()=\u003e{\r\n    if(debeRobar()){\r\n      setTimeout(()=\u003e{ manoDealer.push(robar()); renderizarManos(); loop(); }, 600);\r\n    }else{\r\n      setTimeout(resolverResultadoGlobal, 650);\r\n    }\r\n  };\r\n  loop();\r\n}\r\n\r\n// ========== RESOLUCIONES Y PAGOS ==========\r\nfunction resolverResultadoGlobal(){\r\n  const puntosDealer=valorMano(manoDealer).puntos;\r\n  const dealerBJ = esBlackjackInicial(manoDealer);\r\n  let delta=0;\r\n  let wins=0, losses=0, pushes=0;\r\n\r\n  manosJugador.forEach(m=\u003e{\r\n    const pj=valorMano(m.cartas).puntos;\r\n    const jugadorBJ = esBlackjackInicial(m.cartas);\r\n    \r\n    if(dealerBJ \u0026\u0026 jugadorBJ){\r\n      // Ambos blackjack - push\r\n      pushes++;\r\n      balance += m.apuesta; // devolver apuesta\r\n    } else if(dealerBJ){\r\n      // Solo crupier blackjack - pierde (a menos que tenga seguro)\r\n      losses++;\r\n    } else if(jugadorBJ){\r\n      // Solo jugador blackjack - gana 3:2\r\n      wins++;\r\n      balance += m.apuesta * 2.5;\r\n      delta += m.apuesta * 1.5;\r\n      estadisticas.blackjacks++;\r\n    } else if(pj\u003e21){\r\n      // Jugador se pas√≥\r\n      losses++;\r\n    } else if(puntosDealer\u003e21){\r\n      // Crupier se pas√≥\r\n      wins++;\r\n      balance += m.apuesta*2;\r\n      delta += m.apuesta;\r\n    } else if(pj\u003epuntosDealer){\r\n      // Jugador gana\r\n      wins++;\r\n      balance += m.apuesta*2;\r\n      delta += m.apuesta;\r\n    } else if(pj\u003cpuntosDealer){\r\n      // Crupier gana\r\n      losses++;\r\n    } else {\r\n      // Empate\r\n      pushes++;\r\n      balance += m.apuesta;\r\n    }\r\n  });\r\n\r\n  // Manejar seguro\r\n  if(dealerBJ \u0026\u0026 seguroTomado){\r\n    balance += costoSeguro * 3; // paga 2:1\r\n    delta += costoSeguro * 2;\r\n  }\r\n\r\n  const tipoSalida = wins\u003elosses ? \u0027ganada\u0027 : (losses\u003ewins ? \u0027perdida\u0027 : \u0027empate\u0027);\r\n  \r\n  // ACTUALIZAR ESTAD√çSTICAS\r\n  estadisticas.partidasJugadas++;\r\n  if (tipoSalida === \u0027ganada\u0027) {\r\n    estadisticas.victorias++;\r\n    estadisticas.rachaActual++;\r\n    if (estadisticas.rachaActual \u003e estadisticas.mejorRacha) {\r\n      estadisticas.mejorRacha = estadisticas.rachaActual;\r\n    }\r\n  } else if (tipoSalida === \u0027perdida\u0027) {\r\n    estadisticas.derrotas++;\r\n    estadisticas.rachaActual = 0;\r\n  } else {\r\n    estadisticas.empates++;\r\n  }\r\n  \r\n    actualizarEstadisticas();\r\n\r\n  // === Persistir la ronda en el backend ===\r\n  // 1) Total apostado (apuestas de todas las manos + seguro si se tom√≥)\r\n  let totalApostado = 0;\r\n  manosJugador.forEach(m =\u003e totalApostado += (m.apuesta || 0));\r\n  if (seguroTomado) totalApostado += (costoSeguro || 0);\r\n\r\n  // 2) Total cobrado (sumar pagos brutos sin usar \u0027delta\u0027)\r\n  let totalCobrado = 0;\r\n\r\n  // usamos las variables ya calculadas arriba:\r\n  // const puntosDealer = valorMano(manoDealer).puntos;\r\n  // const dealerBJ     = esBlackjackInicial(manoDealer);\r\n\r\n  manosJugador.forEach(m =\u003e {\r\n    const apuesta   = m.apuesta || 0;\r\n    const puntosJ   = valorMano(m.cartas).puntos;\r\n    const jugadorBJ = esBlackjackInicial(m.cartas);\r\n\r\n    if (jugadorBJ \u0026\u0026 !dealerBJ) {\r\n      // Blackjack jugador =\u003e cobra 2.5x\r\n      totalCobrado += apuesta * 2.5;\r\n    } else if (puntosJ \u003e 21) {\r\n      // pierde =\u003e no cobra\r\n    } else if (dealerBJ \u0026\u0026 !jugadorBJ) {\r\n      // pierde =\u003e no cobra\r\n    } else {\r\n      if (puntosDealer \u003e 21 || puntosJ \u003e puntosDealer) {\r\n        // gana normal =\u003e 2x\r\n        totalCobrado += apuesta * 2;\r\n      } else if (puntosJ === puntosDealer) {\r\n        // push =\u003e devuelve apuesta\r\n        totalCobrado += apuesta;\r\n      } else {\r\n        // pierde =\u003e no cobra\r\n      }\r\n    }\r\n  });\r\n\r\n  // Seguro: paga 2:1 + devoluci√≥n del coste (3x bruto) si dealer tiene BJ\r\n  if (seguroTomado \u0026\u0026 dealerBJ) {\r\n    totalCobrado += (costoSeguro || 0) * 3;\r\n  }\r\n\r\n  const resultadoApi = (wins\u003elosses) ? \u0027ganada\u0027 : (losses\u003ewins ? \u0027perdida\u0027 : \u0027empate\u0027);\r\n\r\n  fetch(\u0027/api/blackjack/apostar\u0027, {\r\n    method: \u0027POST\u0027,\r\n    headers: {\u0027Content-Type\u0027:\u0027application/json\u0027},\r\n    body: JSON.stringify({\r\n      cantidad: totalApostado,\r\n      ganancia: totalCobrado,\r\n      resultado: resultadoApi\r\n    })\r\n  })\r\n  .then(r =\u003e r.json())\r\n  .then(data =\u003e {\r\n    if (data \u0026\u0026 typeof data.nuevo_balance === \u0027number\u0027) {\r\n      // Sincronizamos con el saldo del servidor (fuente de la verdad)\r\n      balance = data.nuevo_balance;\r\n    }\r\n    const $bal = document.getElementById(\u0027balance\u0027);\r\n    if ($bal) $bal.textContent = balance.toFixed(2);\r\n    const $stat = document.getElementById(\u0027stat-saldo\u0027);\r\n    if ($stat) $stat.textContent = balance.toFixed(2);\r\n  })\r\n  .catch(err =\u003e console.error(\u0027Error al persistir la ronda:\u0027, err))\r\n  .finally(() =\u003e {\r\n    finDeRonda(tipoSalida, delta, \u0027\u0027);\r\n  });\r\n}\r\n\r\n\r\nfunction finDeRonda(tipo, delta, detalle){\r\n  juegoActivo=false;\r\n  bloquearAcciones(true);\r\n  mostrarResultadoUI({tipo, delta, detalle});\r\n}\r\n\r\n// ========== REINICIO ==========\r\nfunction reiniciarMismaApuesta(){\r\n  if(!apuestaBase || apuestaBase\u003c=0){ location.reload(); return; }\r\n  document.getElementById(\u0027cantidad\u0027).value=apuestaBase;\r\n  iniciarBlackjack();\r\n}\r\n\r\nfunction salirDelJuego() {\r\n  if (confirm(\u0027¬øEst√°s seguro de que quieres salir? Se perder√°n las estad√≠sticas de esta sesi√≥n.\u0027)) {\r\n    location.reload();\r\n  }\r\n}\r\n\r\n// ========== EVENTOS INICIALES ==========\r\ndocument.addEventListener(\u0027DOMContentLoaded\u0027, ()=\u003e{\r\n  deck = barajar(crearBaraja(DECKS));\r\n  bloquearAcciones(true);\r\n  actualizarMarcadores();\r\n  actualizarEstadisticas();\r\n\r\n  // Botones y ayuda\r\n  document.getElementById(\u0027btn-pedir\u0027).onclick = onHit;\r\n  document.getElementById(\u0027btn-plantar\u0027).onclick = onStand;\r\n  document.getElementById(\u0027btn-doblar\u0027).onclick = onDouble;\r\n  document.getElementById(\u0027btn-split\u0027).onclick = onSplit;\r\n  document.getElementById(\u0027btn-insurance\u0027).onclick = onInsurance;\r\n\r\n  const help = document.getElementById(\u0027help-modal\u0027);\r\n  document.getElementById(\u0027open-help\u0027).onclick = ()=\u003e help.style.display=\u0027flex\u0027;\r\n  document.getElementById(\u0027close-help\u0027).onclick = ()=\u003e help.style.display=\u0027none\u0027;\r\n  help.addEventListener(\u0027click\u0027, (e)=\u003e{ if(e.target===help) help.style.display=\u0027none\u0027; });\r\n});\n\u003c/script\u003e\n{% endblock %}\r\n\r\n\r\n",
    "PSPath":  "C:\\Users\\rocaq\\Desktop\\UCM\\SEGUNDO\\Ing. Software I\\proyectois1-thatwasepic\\src\\templates\\pages\\casino\\juegos\\singleplayer\\blackjack.html",
    "PSParentPath":  "C:\\Users\\rocaq\\Desktop\\UCM\\SEGUNDO\\Ing. Software I\\proyectois1-thatwasepic\\src\\templates\\pages\\casino\\juegos\\singleplayer",
    "PSChildName":  "blackjack.html",
    "PSDrive":  {
                    "CurrentLocation":  "Users\\rocaq\\Desktop\\UCM\\SEGUNDO\\Ing. Software I\\proyectois1-thatwasepic",
                    "Name":  "C",
                    "Provider":  {
                                     "ImplementingType":  "Microsoft.PowerShell.Commands.FileSystemProvider",
                                     "HelpFile":  "System.Management.Automation.dll-Help.xml",
                                     "Name":  "FileSystem",
                                     "PSSnapIn":  "Microsoft.PowerShell.Core",
                                     "ModuleName":  "Microsoft.PowerShell.Core",
                                     "Module":  null,
                                     "Description":  "",
                                     "Capabilities":  52,
                                     "Home":  "C:\\Users\\rocaq",
                                     "Drives":  "C E"
                                 },
                    "Root":  "C:\\",
                    "Description":  "Windows",
                    "MaximumSize":  null,
                    "Credential":  {
                                       "UserName":  null,
                                       "Password":  null
                                   },
                    "DisplayRoot":  null
                },
    "PSProvider":  {
                       "ImplementingType":  {
                                                "Module":  "System.Management.Automation.dll",
                                                "Assembly":  "System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35",
                                                "TypeHandle":  "System.RuntimeTypeHandle",
                                                "DeclaringMethod":  null,
                                                "BaseType":  "System.Management.Automation.Provider.NavigationCmdletProvider",
                                                "UnderlyingSystemType":  "Microsoft.PowerShell.Commands.FileSystemProvider",
                                                "FullName":  "Microsoft.PowerShell.Commands.FileSystemProvider",
                                                "AssemblyQualifiedName":  "Microsoft.PowerShell.Commands.FileSystemProvider, System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35",
                                                "Namespace":  "Microsoft.PowerShell.Commands",
                                                "GUID":  "b4755d19-b6a7-38dc-ae06-4167f801062f",
                                                "IsEnum":  false,
                                                "GenericParameterAttributes":  null,
                                                "IsSecurityCritical":  true,
                                                "IsSecuritySafeCritical":  false,
                                                "IsSecurityTransparent":  false,
                                                "IsGenericTypeDefinition":  false,
                                                "IsGenericParameter":  false,
                                                "GenericParameterPosition":  null,
                                                "IsGenericType":  false,
                                                "IsConstructedGenericType":  false,
                                                "ContainsGenericParameters":  false,
                                                "StructLayoutAttribute":  "System.Runtime.InteropServices.StructLayoutAttribute",
                                                "Name":  "FileSystemProvider",
                                                "MemberType":  32,
                                                "DeclaringType":  null,
                                                "ReflectedType":  null,
                                                "MetadataToken":  33556356,
                                                "GenericTypeParameters":  "",
                                                "DeclaredConstructors":  "Void .ctor() Void .cctor()",
                                                "DeclaredEvents":  "",
                                                "DeclaredFields":  "System.Collections.ObjectModel.Collection`1[System.Management.Automation.WildcardPattern] excludeMatcher System.Management.Automation.PSTraceSource tracer Int32 FILETRANSFERSIZE System.String ProviderName",
                                                "DeclaredMembers":  "System.String NormalizePath(System.String) System.IO.FileSystemInfo GetFileSystemInfo(System.String, Boolean ByRef) Boolean IsFilterSet() System.Object GetChildNamesDynamicParameters(System.String) System.Object GetChildItemsDynamicParameters(System.String, Boolean) System.Object CopyItemDynamicParameters(System.String, System.String, Boolean) System.String GetHelpMaml(System.String, System.String) System.Management.Automation.ProviderInfo Start(System.Management.Automation.ProviderInfo) System.Management.Automation.PSDriveInfo NewDrive(System.Management.Automation.PSDriveInfo) Void MapNetworkDrive(System.Management.Automation.PSDriveInfo) Boolean IsNetworkMappedDrive(System.Management.Automation.PSDriveInfo) System.Management.Automation.PSDriveInfo RemoveDrive(System.Management.Automation.PSDriveInfo) Boolean IsSupportedDriveForPersistence(System.Management.Automation.PSDriveInfo) System.String GetUNCForNetworkDrive(System.String) System.String GetSubstitutedPathForNetworkDosDevice(System.String) System.String GetRootPathForNetworkDriveOrDosDevice(System.IO.DriveInfo) System.Collections.ObjectModel.Collection`1[System.Management.Automation.PSDriveInfo] InitializeDefaultDrives() System.Object GetItemDynamicParameters(System.String) Boolean IsValidPath(System.String) Void GetItem(System.String) System.IO.FileSystemInfo GetFileSystemItem(System.String, Boolean ByRef, Boolean) Void InvokeDefaultAction(System.String) Void GetChildItems(System.String, Boolean, UInt32) Void GetChildNames(System.String, System.Management.Automation.ReturnContainers) Boolean ConvertPath(System.String, System.String, System.String ByRef, System.String ByRef) Void GetPathItems(System.String, Boolean, UInt32, Boolean, System.Management.Automation.ReturnContainers) Void Dir(System.IO.DirectoryInfo, Boolean, UInt32, Boolean, System.Management.Automation.ReturnContainers, InodeTracker) System.Management.Automation.FlagsExpression`1[System.IO.FileAttributes] FormatAttributeSwitchParamters() System.String Mode(System.Management.Automation.PSObject) Void RenameItem(System.String, System.String) Void NewItem(System.String, System.String, System.Object) Boolean CheckItemExists(System.String, Boolean ByRef) ItemType GetItemType(System.String) Void CreateDirectory(System.String, Boolean) Boolean CreateIntermediateDirectories(System.String) Void RemoveItem(System.String, Boolean) System.Object RemoveItemDynamicParameters(System.String, Boolean) Void RemoveDirectoryInfoItem(System.IO.DirectoryInfo, Boolean, Boolean, Boolean) Void RemoveFileInfoItem(System.IO.FileInfo, Boolean) Void RemoveFileSystemItem(System.IO.FileSystemInfo, Boolean) Boolean ItemExists(System.String) Boolean ItemExists(System.String, System.Management.Automation.ErrorRecord ByRef) System.Object ItemExistsDynamicParameters(System.String) Boolean HasChildItems(System.String) Boolean DirectoryInfoHasChildItems(System.IO.DirectoryInfo) Void CopyItem(System.String, System.String, Boolean) Void CopyItemFromRemoteSession(System.String, System.String, Boolean, Boolean, System.Management.Automation.Runspaces.PSSession) Void CopyItemLocalOrToSession(System.String, System.String, Boolean, Boolean, System.Management.Automation.PowerShell) Void CopyDirectoryInfoItem(System.IO.DirectoryInfo, System.String, Boolean, Boolean, System.Management.Automation.PowerShell) Void CopyFileInfoItem(System.IO.FileInfo, System.String, Boolean, System.Management.Automation.PowerShell) Void CopyDirectoryFromRemoteSession(System.String, System.String, System.String, Boolean, Boolean, System.Management.Automation.PowerShell) System.Collections.ArrayList GetRemoteSourceAlternateStreams(System.Management.Automation.PowerShell, System.String) Void InitilizeFunctionPSCopyFileFromRemoteSession(System.Management.Automation.PowerShell) Void RemoveFunctionsPSCopyFileFromRemoteSession(System.Management.Automation.PowerShell) Boolean ValidRemoteSessionForScripting(System.Management.Automation.Runspaces.Runspace) System.Collections.Hashtable GetRemoteFileMetadata(System.String, System.Management.Automation.PowerShell) Void SetFileMetadata(System.String, System.IO.FileInfo, System.Management.Automation.PowerShell) Void CopyFileFromRemoteSession(System.String, System.String, System.String, Boolean, System.Management.Automation.PowerShell, Int64) Boolean PerformCopyFileFromRemoteSession(System.String, System.IO.FileInfo, System.String, Boolean, System.Management.Automation.PowerShell, Int64, Boolean, System.String) Void InitilizeFunctionsPSCopyFileToRemoteSession(System.Management.Automation.PowerShell) Void RemoveFunctionPSCopyFileToRemoteSession(System.Management.Automation.PowerShell) Boolean RemoteTargetSupportsAlternateStreams(System.Management.Automation.PowerShell, System.String) System.String MakeRemotePath(System.Management.Automation.PowerShell, System.String, System.String) Boolean RemoteDirectoryExist(System.Management.Automation.PowerShell, System.String) Boolean CopyFileStreamToRemoteSession(System.IO.FileInfo, System.String, System.Management.Automation.PowerShell, Boolean, System.String) System.Collections.Hashtable GetFileMetadata(System.IO.FileInfo) Void SetRemoteFileMetadata(System.IO.FileInfo, System.String, System.Management.Automation.PowerShell) Boolean PerformCopyFileToRemoteSession(System.IO.FileInfo, System.String, System.Management.Automation.PowerShell) Boolean RemoteDestinationPathIsFile(System.String, System.Management.Automation.PowerShell) System.String CreateDirectoryOnRemoteSession(System.String, Boolean, System.Management.Automation.PowerShell) Boolean PathIsReservedDeviceName(System.String, System.String) System.String GetParentPath(System.String, System.String) Boolean IsAbsolutePath(System.String) Boolean IsUNCPath(System.String) Boolean IsUNCRoot(System.String) Boolean IsPathRoot(System.String) System.String NormalizeRelativePath(System.String, System.String) System.String NormalizeRelativePathHelper(System.String, System.String) System.String RemoveRelativeTokens(System.String) System.String GetCommonBase(System.String, System.String) System.Collections.Generic.Stack`1[System.String] TokenizePathToStack(System.String, System.String) System.Collections.Generic.Stack`1[System.String] NormalizeThePath(System.String, System.Collections.Generic.Stack`1[System.String]) System.String CreateNormalizedRelativePathFromStack(System.Collections.Generic.Stack`1[System.String]) System.String GetChildName(System.String) System.String EnsureDriveIsRooted(System.String) Boolean IsItemContainer(System.String) Void MoveItem(System.String, System.String) Void MoveFileInfoItem(System.IO.FileInfo, System.String, Boolean, Boolean) Void MoveDirectoryInfoUnchecked(System.IO.DirectoryInfo, System.String, Boolean) Void MoveDirectoryInfoItem(System.IO.DirectoryInfo, System.String, Boolean) Void CopyAndDelete(System.IO.DirectoryInfo, System.String, Boolean) Boolean IsSameVolume(System.String, System.String) Void GetProperty(System.String, System.Collections.ObjectModel.Collection`1[System.String]) System.Object GetPropertyDynamicParameters(System.String, System.Collections.ObjectModel.Collection`1[System.String]) Void SetProperty(System.String, System.Management.Automation.PSObject) System.Object SetPropertyDynamicParameters(System.String, System.Management.Automation.PSObject) Void ClearProperty(System.String, System.Collections.ObjectModel.Collection`1[System.String]) System.Object ClearPropertyDynamicParameters(System.String, System.Collections.ObjectModel.Collection`1[System.String]) System.Management.Automation.Provider.IContentReader GetContentReader(System.String) System.Object GetContentReaderDynamicParameters(System.String) System.Management.Automation.Provider.IContentWriter GetContentWriter(System.String) System.Object GetContentWriterDynamicParameters(System.String) Void ClearContent(System.String) System.Object ClearContentDynamicParameters(System.String) Int32 SafeGetFileAttributes(System.String) Void ValidateParameters(Boolean) Void GetSecurityDescriptor(System.String, System.Security.AccessControl.AccessControlSections) Void SetSecurityDescriptor(System.String, System.Security.AccessControl.ObjectSecurity) Void SetSecurityDescriptor(System.String, System.Security.AccessControl.ObjectSecurity, System.Security.AccessControl.AccessControlSections) System.Security.AccessControl.ObjectSecurity NewSecurityDescriptorFromPath(System.String, System.Security.AccessControl.AccessControlSections) System.Security.AccessControl.ObjectSecurity NewSecurityDescriptorOfType(System.String, System.Security.AccessControl.AccessControlSections) System.Security.AccessControl.ObjectSecurity NewSecurityDescriptor(ItemType) System.Management.Automation.ErrorRecord CreateErrorRecord(System.String, System.String) Void \u003cRemoveDirectoryInfoItem\u003eg__WriteErrorHelper|43_0(System.Exception, \u003c\u003ec__DisplayClass43_0 ByRef) Void .ctor() Void .cctor() System.Collections.ObjectModel.Collection`1[System.Management.Automation.WildcardPattern] excludeMatcher System.Management.Automation.PSTraceSource tracer Int32 FILETRANSFERSIZE System.String ProviderName Microsoft.PowerShell.Commands.FileSystemProvider+ItemType Microsoft.PowerShell.Commands.FileSystemProvider+NativeMethods Microsoft.PowerShell.Commands.FileSystemProvider+NetResource Microsoft.PowerShell.Commands.FileSystemProvider+InodeTracker Microsoft.PowerShell.Commands.FileSystemProvider+\u003c\u003ec__DisplayClass43_0",
                                                "DeclaredMethods":  "System.String Mode(System.Management.Automation.PSObject) System.String NormalizePath(System.String) System.IO.FileSystemInfo GetFileSystemInfo(System.String, Boolean ByRef) Boolean IsFilterSet() System.Object GetChildNamesDynamicParameters(System.String) System.Object GetChildItemsDynamicParameters(System.String, Boolean) System.Object CopyItemDynamicParameters(System.String, System.String, Boolean) System.String GetHelpMaml(System.String, System.String) System.Management.Automation.ProviderInfo Start(System.Management.Automation.ProviderInfo) System.Management.Automation.PSDriveInfo NewDrive(System.Management.Automation.PSDriveInfo) Void MapNetworkDrive(System.Management.Automation.PSDriveInfo) Boolean IsNetworkMappedDrive(System.Management.Automation.PSDriveInfo) System.Management.Automation.PSDriveInfo RemoveDrive(System.Management.Automation.PSDriveInfo) Boolean IsSupportedDriveForPersistence(System.Management.Automation.PSDriveInfo) System.String GetUNCForNetworkDrive(System.String) System.String GetSubstitutedPathForNetworkDosDevice(System.String) System.String GetRootPathForNetworkDriveOrDosDevice(System.IO.DriveInfo) System.Collections.ObjectModel.Collection`1[System.Management.Automation.PSDriveInfo] InitializeDefaultDrives() System.Object GetItemDynamicParameters(System.String) Boolean IsValidPath(System.String) Void GetItem(System.String) System.IO.FileSystemInfo GetFileSystemItem(System.String, Boolean ByRef, Boolean) Void InvokeDefaultAction(System.String) Void GetChildItems(System.String, Boolean, UInt32) Void GetChildNames(System.String, System.Management.Automation.ReturnContainers) Boolean ConvertPath(System.String, System.String, System.String ByRef, System.String ByRef) Void GetPathItems(System.String, Boolean, UInt32, Boolean, System.Management.Automation.ReturnContainers) Void Dir(System.IO.DirectoryInfo, Boolean, UInt32, Boolean, System.Management.Automation.ReturnContainers, InodeTracker) System.Management.Automation.FlagsExpression`1[System.IO.FileAttributes] FormatAttributeSwitchParamters() Void RenameItem(System.String, System.String) Void NewItem(System.String, System.String, System.Object) Boolean CheckItemExists(System.String, Boolean ByRef) ItemType GetItemType(System.String) Void CreateDirectory(System.String, Boolean) Boolean CreateIntermediateDirectories(System.String) Void RemoveItem(System.String, Boolean) System.Object RemoveItemDynamicParameters(System.String, Boolean) Void RemoveDirectoryInfoItem(System.IO.DirectoryInfo, Boolean, Boolean, Boolean) Void RemoveFileInfoItem(System.IO.FileInfo, Boolean) Void RemoveFileSystemItem(System.IO.FileSystemInfo, Boolean) Boolean ItemExists(System.String) Boolean ItemExists(System.String, System.Management.Automation.ErrorRecord ByRef) System.Object ItemExistsDynamicParameters(System.String) Boolean HasChildItems(System.String) Boolean DirectoryInfoHasChildItems(System.IO.DirectoryInfo) Void CopyItem(System.String, System.String, Boolean) Void CopyItemFromRemoteSession(System.String, System.String, Boolean, Boolean, System.Management.Automation.Runspaces.PSSession) Void CopyItemLocalOrToSession(System.String, System.String, Boolean, Boolean, System.Management.Automation.PowerShell) Void CopyDirectoryInfoItem(System.IO.DirectoryInfo, System.String, Boolean, Boolean, System.Management.Automation.PowerShell) Void CopyFileInfoItem(System.IO.FileInfo, System.String, Boolean, System.Management.Automation.PowerShell) Void CopyDirectoryFromRemoteSession(System.String, System.String, System.String, Boolean, Boolean, System.Management.Automation.PowerShell) System.Collections.ArrayList GetRemoteSourceAlternateStreams(System.Management.Automation.PowerShell, System.String) Void InitilizeFunctionPSCopyFileFromRemoteSession(System.Management.Automation.PowerShell) Void RemoveFunctionsPSCopyFileFromRemoteSession(System.Management.Automation.PowerShell) Boolean ValidRemoteSessionForScripting(System.Management.Automation.Runspaces.Runspace) System.Collections.Hashtable GetRemoteFileMetadata(System.String, System.Management.Automation.PowerShell) Void SetFileMetadata(System.String, System.IO.FileInfo, System.Management.Automation.PowerShell) Void CopyFileFromRemoteSession(System.String, System.String, System.String, Boolean, System.Management.Automation.PowerShell, Int64) Boolean PerformCopyFileFromRemoteSession(System.String, System.IO.FileInfo, System.String, Boolean, System.Management.Automation.PowerShell, Int64, Boolean, System.String) Void InitilizeFunctionsPSCopyFileToRemoteSession(System.Management.Automation.PowerShell) Void RemoveFunctionPSCopyFileToRemoteSession(System.Management.Automation.PowerShell) Boolean RemoteTargetSupportsAlternateStreams(System.Management.Automation.PowerShell, System.String) System.String MakeRemotePath(System.Management.Automation.PowerShell, System.String, System.String) Boolean RemoteDirectoryExist(System.Management.Automation.PowerShell, System.String) Boolean CopyFileStreamToRemoteSession(System.IO.FileInfo, System.String, System.Management.Automation.PowerShell, Boolean, System.String) System.Collections.Hashtable GetFileMetadata(System.IO.FileInfo) Void SetRemoteFileMetadata(System.IO.FileInfo, System.String, System.Management.Automation.PowerShell) Boolean PerformCopyFileToRemoteSession(System.IO.FileInfo, System.String, System.Management.Automation.PowerShell) Boolean RemoteDestinationPathIsFile(System.String, System.Management.Automation.PowerShell) System.String CreateDirectoryOnRemoteSession(System.String, Boolean, System.Management.Automation.PowerShell) Boolean PathIsReservedDeviceName(System.String, System.String) System.String GetParentPath(System.String, System.String) Boolean IsAbsolutePath(System.String) Boolean IsUNCPath(System.String) Boolean IsUNCRoot(System.String) Boolean IsPathRoot(System.String) System.String NormalizeRelativePath(System.String, System.String) System.String NormalizeRelativePathHelper(System.String, System.String) System.String RemoveRelativeTokens(System.String) System.String GetCommonBase(System.String, System.String) System.Collections.Generic.Stack`1[System.String] TokenizePathToStack(System.String, System.String) System.Collections.Generic.Stack`1[System.String] NormalizeThePath(System.String, System.Collections.Generic.Stack`1[System.String]) System.String CreateNormalizedRelativePathFromStack(System.Collections.Generic.Stack`1[System.String]) System.String GetChildName(System.String) System.String EnsureDriveIsRooted(System.String) Boolean IsItemContainer(System.String) Void MoveItem(System.String, System.String) Void MoveFileInfoItem(System.IO.FileInfo, System.String, Boolean, Boolean) Void MoveDirectoryInfoUnchecked(System.IO.DirectoryInfo, System.String, Boolean) Void MoveDirectoryInfoItem(System.IO.DirectoryInfo, System.String, Boolean) Void CopyAndDelete(System.IO.DirectoryInfo, System.String, Boolean) Boolean IsSameVolume(System.String, System.String) Void GetProperty(System.String, System.Collections.ObjectModel.Collection`1[System.String]) System.Object GetPropertyDynamicParameters(System.String, System.Collections.ObjectModel.Collection`1[System.String]) Void SetProperty(System.String, System.Management.Automation.PSObject) System.Object SetPropertyDynamicParameters(System.String, System.Management.Automation.PSObject) Void ClearProperty(System.String, System.Collections.ObjectModel.Collection`1[System.String]) System.Object ClearPropertyDynamicParameters(System.String, System.Collections.ObjectModel.Collection`1[System.String]) System.Management.Automation.Provider.IContentReader GetContentReader(System.String) System.Object GetContentReaderDynamicParameters(System.String) System.Management.Automation.Provider.IContentWriter GetContentWriter(System.String) System.Object GetContentWriterDynamicParameters(System.String) Void ClearContent(System.String) System.Object ClearContentDynamicParameters(System.String) Int32 SafeGetFileAttributes(System.String) Void ValidateParameters(Boolean) Void GetSecurityDescriptor(System.String, System.Security.AccessControl.AccessControlSections) Void SetSecurityDescriptor(System.String, System.Security.AccessControl.ObjectSecurity) Void SetSecurityDescriptor(System.String, System.Security.AccessControl.ObjectSecurity, System.Security.AccessControl.AccessControlSections) System.Security.AccessControl.ObjectSecurity NewSecurityDescriptorFromPath(System.String, System.Security.AccessControl.AccessControlSections) System.Security.AccessControl.ObjectSecurity NewSecurityDescriptorOfType(System.String, System.Security.AccessControl.AccessControlSections) System.Security.AccessControl.ObjectSecurity NewSecurityDescriptor(ItemType) System.Management.Automation.ErrorRecord CreateErrorRecord(System.String, System.String) Void \u003cRemoveDirectoryInfoItem\u003eg__WriteErrorHelper|43_0(System.Exception, \u003c\u003ec__DisplayClass43_0 ByRef)",
                                                "DeclaredNestedTypes":  "Microsoft.PowerShell.Commands.FileSystemProvider+ItemType Microsoft.PowerShell.Commands.FileSystemProvider+NativeMethods Microsoft.PowerShell.Commands.FileSystemProvider+NetResource Microsoft.PowerShell.Commands.FileSystemProvider+InodeTracker Microsoft.PowerShell.Commands.FileSystemProvider+\u003c\u003ec__DisplayClass43_0",
                                                "DeclaredProperties":  "",
                                                "ImplementedInterfaces":  "System.Management.Automation.IResourceSupplier System.Management.Automation.Provider.IContentCmdletProvider System.Management.Automation.Provider.IPropertyCmdletProvider System.Management.Automation.Provider.ISecurityDescriptorCmdletProvider System.Management.Automation.Provider.ICmdletProviderSupportsHelp",
                                                "TypeInitializer":  "Void .cctor()",
                                                "IsNested":  false,
                                                "Attributes":  1048833,
                                                "IsVisible":  true,
                                                "IsNotPublic":  false,
                                                "IsPublic":  true,
                                                "IsNestedPublic":  false,
                                                "IsNestedPrivate":  false,
                                                "IsNestedFamily":  false,
                                                "IsNestedAssembly":  false,
                                                "IsNestedFamANDAssem":  false,
                                                "IsNestedFamORAssem":  false,
                                                "IsAutoLayout":  true,
                                                "IsLayoutSequential":  false,
                                                "IsExplicitLayout":  false,
                                                "IsClass":  true,
                                                "IsInterface":  false,
                                                "IsValueType":  false,
                                                "IsAbstract":  false,
                                                "IsSealed":  true,
                                                "IsSpecialName":  false,
                                                "IsImport":  false,
                                                "IsSerializable":  false,
                                                "IsAnsiClass":  true,
                                                "IsUnicodeClass":  false,
                                                "IsAutoClass":  false,
                                                "IsArray":  false,
                                                "IsByRef":  false,
                                                "IsPointer":  false,
                                                "IsPrimitive":  false,
                                                "IsCOMObject":  false,
                                                "HasElementType":  false,
                                                "IsContextful":  false,
                                                "IsMarshalByRef":  false,
                                                "GenericTypeArguments":  "",
                                                "CustomAttributes":  "[System.Management.Automation.Provider.CmdletProviderAttribute(\"FileSystem\", (System.Management.Automation.Provider.ProviderCapabilities)52)] [System.Management.Automation.OutputTypeAttribute(typeof(System.Security.AccessControl.FileSecurity), ProviderCmdlet = \"Set-Acl\")] [System.Management.Automation.OutputTypeAttribute(new Type[2] { typeof(System.String), typeof(System.Management.Automation.PathInfo) }, ProviderCmdlet = \"Resolve-Path\")] [System.Management.Automation.OutputTypeAttribute(typeof(System.Management.Automation.PathInfo), ProviderCmdlet = \"Push-Location\")] [System.Management.Automation.OutputTypeAttribute(new Type[2] { typeof(System.Byte), typeof(System.String) }, ProviderCmdlet = \"Get-Content\")] [System.Management.Automation.OutputTypeAttribute(typeof(System.IO.FileInfo), ProviderCmdlet = \"Get-Item\")] [System.Management.Automation.OutputTypeAttribute(new Type[2] { typeof(System.IO.FileInfo), typeof(System.IO.DirectoryInfo) }, ProviderCmdlet = \"Get-ChildItem\")] [System.Management.Automation.OutputTypeAttribute(new Type[2] { typeof(System.Security.AccessControl.FileSecurity), typeof(System.Security.AccessControl.DirectorySecurity) }, ProviderCmdlet = \"Get-Acl\")] [System.Management.Automation.OutputTypeAttribute(new Type[4] { typeof(System.Boolean), typeof(System.String), typeof(System.IO.FileInfo), typeof(System.IO.DirectoryInfo) }, ProviderCmdlet = \"Get-Item\")] [System.Management.Automation.OutputTypeAttribute(new Type[5] { typeof(System.Boolean), typeof(System.String), typeof(System.DateTime), typeof(System.IO.FileInfo), typeof(System.IO.DirectoryInfo) }, ProviderCmdlet = \"Get-ItemProperty\")] [System.Management.Automation.OutputTypeAttribute(new Type[2] { typeof(System.String), typeof(System.IO.FileInfo) }, ProviderCmdlet = \"New-Item\")]"
                                            },
                       "HelpFile":  "System.Management.Automation.dll-Help.xml",
                       "Name":  "FileSystem",
                       "PSSnapIn":  {
                                        "Name":  "Microsoft.PowerShell.Core",
                                        "IsDefault":  true,
                                        "ApplicationBase":  "C:\\Windows\\System32\\WindowsPowerShell\\v1.0",
                                        "AssemblyName":  "System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, ProcessorArchitecture=MSIL",
                                        "ModuleName":  "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\System.Management.Automation.dll",
                                        "PSVersion":  "5.1.26100.7019",
                                        "Version":  "3.0.0.0",
                                        "Types":  "types.ps1xml typesv3.ps1xml",
                                        "Formats":  "Certificate.format.ps1xml DotNetTypes.format.ps1xml FileSystem.format.ps1xml Help.format.ps1xml HelpV3.format.ps1xml PowerShellCore.format.ps1xml PowerShellTrace.format.ps1xml Registry.format.ps1xml",
                                        "Description":  "Este complemento de Windows PowerShell contiene cmdlets usados para administrar los componentes de Windows PowerShell.",
                                        "Vendor":  "Microsoft Corporation",
                                        "LogPipelineExecutionDetails":  false
                                    },
                       "ModuleName":  "Microsoft.PowerShell.Core",
                       "Module":  null,
                       "Description":  "",
                       "Capabilities":  52,
                       "Home":  "C:\\Users\\rocaq",
                       "Drives":  [
                                      "C",
                                      "E"
                                  ]
                   },
    "ReadCount":  1
}

